<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dovie Messenger iOS í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        .step {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #4CAF50;
        }
        .download-btn {
            display: block;
            width: 100%;
            padding: 15px;
            background: #4CAF50;
            color: white;
            text-decoration: none;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            margin: 20px 0;
            transition: background 0.3s;
        }
        .download-btn:hover {
            background: #45a049;
        }
        .test-btn {
            display: inline-block;
            padding: 10px 20px;
            background: #FF9500;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 5px;
        }
        .warning {
            background: rgba(255,152,0,0.2);
            border-left: 5px solid #FF9500;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .success {
            background: rgba(76,175,80,0.2);
            border-left: 5px solid #4CAF50;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
        }
        code {
            background: rgba(0,0,0,0.3);
            padding: 2px 8px;
            border-radius: 4px;
            font-family: 'SF Mono', monospace;
        }
        .test-section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“± Dovie Messenger iOS í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</h1>
        
        <div class="success">
            <h3>âœ… í˜„ì¬ ìƒíƒœ</h3>
            <p>â€¢ iOS ë””ë°”ì´ìŠ¤ í† í° ì‹œìŠ¤í…œ: ì™„ì„±</p>
            <p>â€¢ í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ API: ì‘ë™ ì¤‘</p>
            <p>â€¢ ë±ƒì§€ ì¹´ìš´íŠ¸ ì‹œìŠ¤í…œ: êµ¬í˜„ë¨</p>
            <p>â€¢ ì„œë²„ ì—°ê²°: https://dovie-hello2sangyun.replit.app</p>
        </div>

        <div class="step">
            <h3>1ë‹¨ê³„: iOS í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ</h3>
            <p>ì‹¤ì œ iOS ë””ë°”ì´ìŠ¤ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ê³¼ ë±ƒì§€ë¥¼ í…ŒìŠ¤íŠ¸í•˜ê¸° ìœ„í•œ Xcode í”„ë¡œì íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.</p>
            <a href="/ios-test-download" class="download-btn">
                ğŸ“¥ Dovie iOS í…ŒìŠ¤íŠ¸ í”„ë¡œì íŠ¸ ë‹¤ìš´ë¡œë“œ (ZIP)
            </a>
        </div>

        <div class="step">
            <h3>2ë‹¨ê³„: Xcodeì—ì„œ í”„ë¡œì íŠ¸ ì—´ê¸°</h3>
            <p>1. ZIP íŒŒì¼ì„ ì••ì¶• í•´ì œ</p>
            <p>2. <code>App/App.xcworkspace</code> íŒŒì¼ì„ Xcodeì—ì„œ ì—´ê¸°</p>
            <p>3. iOS ë””ë°”ì´ìŠ¤ë¥¼ Macì— ì—°ê²°</p>
            <p>4. Bundle Identifierë¥¼ ê³ ìœ í•œ ê°’ìœ¼ë¡œ ë³€ê²½ (ì˜ˆ: com.yourname.dovie)</p>
        </div>

        <div class="step">
            <h3>3ë‹¨ê³„: ì‹¤ì œ ë””ë°”ì´ìŠ¤ì—ì„œ ì‹¤í–‰</h3>
            <p>1. Xcodeì—ì„œ íƒ€ê²Ÿì„ ì‹¤ì œ iOS ë””ë°”ì´ìŠ¤ë¡œ ì„ íƒ</p>
            <p>2. <strong>Command + R</strong>ë¡œ ì•± ë¹Œë“œ ë° ì‹¤í–‰</p>
            <p>3. í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ í—ˆìš©</p>
            <p>4. ì•±ì´ ì„œë²„ì— ì—°ê²°ë˜ëŠ”ì§€ í™•ì¸</p>
        </div>

        <div class="warning">
            <h3>âš ï¸ ì£¼ì˜ì‚¬í•­</h3>
            <p>â€¢ ì‹¤ì œ APNS í‘¸ì‹œë¥¼ ìœ„í•´ì„œëŠ” Apple Developer ê³„ì •ì´ í•„ìš”í•©ë‹ˆë‹¤</p>
            <p>â€¢ í˜„ì¬ëŠ” ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì‘ë™í•©ë‹ˆë‹¤</p>
            <p>â€¢ Bundle IDëŠ” ê³ ìœ í•œ ê°’ìœ¼ë¡œ ë³€ê²½í•´ì•¼ í•©ë‹ˆë‹¤</p>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸</h3>
            <p>ì•±ì´ ì‹¤í–‰ë˜ë©´ ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í‘¸ì‹œ ì•Œë¦¼ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:</p>
            
            <a href="#" class="test-btn" onclick="testPush('ê¸°ë³¸ í…ŒìŠ¤íŠ¸', 1)">
                ê¸°ë³¸ í‘¸ì‹œ í…ŒìŠ¤íŠ¸
            </a>
            <a href="#" class="test-btn" onclick="testPush('ë±ƒì§€ ì¹´ìš´íŠ¸ í…ŒìŠ¤íŠ¸', 5)">
                ë±ƒì§€ 5ê°œ í…ŒìŠ¤íŠ¸
            </a>
            <a href="#" class="test-btn" onclick="testPush('ê¸´ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì–´ë–»ê²Œ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!', 10)">
                ê¸´ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸
            </a>
            
            <div id="testResult" style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 10px; display: none;">
                <h4>í…ŒìŠ¤íŠ¸ ê²°ê³¼:</h4>
                <pre id="resultText"></pre>
            </div>
        </div>

        <div class="step">
            <h3>4ë‹¨ê³„: í…ŒìŠ¤íŠ¸ í™•ì¸ì‚¬í•­</h3>
            <p>âœ… ì•±ì—ì„œ í‘¸ì‹œ ì•Œë¦¼ ê¶Œí•œ í—ˆìš©ë¨</p>
            <p>âœ… ë””ë°”ì´ìŠ¤ í† í°ì´ ì„œë²„ì— ë“±ë¡ë¨</p>
            <p>âœ… í™ˆ í™”ë©´ì—ì„œ ì•± ì•„ì´ì½˜ì— ë±ƒì§€ ìˆ«ì í‘œì‹œ</p>
            <p>âœ… í‘¸ì‹œ ì•Œë¦¼ ìˆ˜ì‹  ì‹œ ì‚¬ìš´ë“œ ë° ì§„ë™</p>
            <p>âœ… ì•± í™œì„±í™” ì‹œ ë±ƒì§€ ìë™ í´ë¦¬ì–´</p>
        </div>

        <div class="step">
            <h3>5ë‹¨ê³„: ì‹¤ì œ APNS ì—°ë™ (ì„ íƒì‚¬í•­)</h3>
            <p>ì‹¤ì œ Apple Push Notification Serviceë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:</p>
            <p>1. Apple Developer ê³„ì •ì—ì„œ Push Notification ì¸ì¦ì„œ ìƒì„±</p>
            <p>2. ì„œë²„ í™˜ê²½ë³€ìˆ˜ì— APNS í‚¤ ì„¤ì •:</p>
            <ul>
                <li><code>APNS_KEY_ID</code>: Apple Developer Key ID</li>
                <li><code>APNS_TEAM_ID</code>: Apple Developer Team ID</li>
                <li><code>APNS_PRIVATE_KEY</code>: APNS ì¸ì¦í‚¤ (PEM í˜•ì‹)</li>
            </ul>
        </div>
    </div>

    <script>
        async function testPush(message, badge) {
            const resultDiv = document.getElementById('testResult');
            const resultText = document.getElementById('resultText');
            
            resultDiv.style.display = 'block';
            resultText.textContent = 'í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ ì¤‘...';
            
            try {
                const response = await fetch('/api/test-ios-push', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-user-id': '117'
                    },
                    body: JSON.stringify({
                        message: message,
                        title: 'Dovie Messenger',
                        badge: badge
                    })
                });
                
                const result = await response.json();
                resultText.textContent = JSON.stringify(result, null, 2);
                
                if (result.success) {
                    resultText.textContent = `âœ… í‘¸ì‹œ ì•Œë¦¼ í…ŒìŠ¤íŠ¸ ì„±ê³µ!\në“±ë¡ëœ ë””ë°”ì´ìŠ¤: ${result.registeredDevices}ê°œ\n\n` + JSON.stringify(result, null, 2);
                }
                
            } catch (error) {
                resultText.textContent = `âŒ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`;
            }
        }
    </script>
</body>
</html>