
> rest-express@1.0.0 dev
OpenAI API key is configurederver/index.ts
ğŸ”” Notification scheduler initialized and started
8:27:02 PM [express] serving on port 5000
Browserslist: browsers data (caniuse-lite) is 8 months old. Please run:
  npx update-browserslist-db@latest
  Why you should do it regularly: https://github.com/browserslist/update-db#readme
âœ… ìë™ ë¡œê·¸ì¸ ì„±ê³µ: ì‚¬ìš©ì 112 (naya2sangyun)
8:27:13 PM [express] GET /api/auth/me 200 in 5858ms :: {"user":{"id":112,"username":"naya2sangyun","â€¦
8:27:13 PM [express] GET /api/contacts 304 in 72ms :: {"contacts":[{"id":78,"userId":112,"contactUseâ€¦
8:27:14 PM [express] GET /api/chat-rooms 200 in 278ms :: {"chatRooms":[{"id":90,"name":"ì‚¬ìš©ì 3212","iâ€¦
8:27:14 PM [express] GET /api/unread-counts 200 in 309ms :: {"unreadCounts":[{"chatRoomId":90,"unreaâ€¦
8:27:15 PM [express] GET /api/chat-rooms/91/messages 200 in 61ms :: {"messages":[{"id":610,"chatRoomâ€¦
âœ… ìë™ ë¡œê·¸ì¸ ì„±ê³µ: ì‚¬ìš©ì 112 (naya2sangyun)
8:27:15 PM [express] GET /api/auth/me 200 in 2213ms :: {"user":{"id":112,"username":"naya2sangyun","â€¦
8:27:16 PM [express] GET /api/contacts 304 in 2165ms :: {"contacts":[{"id":78,"userId":112,"contactUâ€¦
8:27:16 PM [express] GET /api/contacts 304 in 40ms :: {"contacts":[{"id":78,"userId":112,"contactUseâ€¦
8:27:16 PM [express] GET /api/contacts 304 in 42ms :: {"contacts":[{"id":78,"userId":112,"contactUseâ€¦
8:27:16 PM [express] GET /api/chat-rooms 200 in 187ms :: {"chatRooms":[{"id":90,"name":"ì‚¬ìš©ì 3212","iâ€¦
8:27:16 PM [express] GET /api/unread-counts 200 in 254ms :: {"unreadCounts":[{"chatRoomId":90,"unreaâ€¦
8:27:16 PM [express] GET /api/chat-rooms 200 in 2312ms :: {"chatRooms":[{"id":90,"name":"ì‚¬ìš©ì 3212","â€¦
8:27:16 PM [express] GET /api/chat-rooms 200 in 196ms :: {"chatRooms":[{"id":90,"name":"ì‚¬ìš©ì 3212","iâ€¦
8:27:16 PM [express] GET /api/chat-rooms/90/messages 200 in 58ms :: {"messages":[{"id":649,"chatRoomâ€¦
8:27:16 PM [express] GET /api/chat-rooms/91/messages 200 in 46ms :: {"messages":[{"id":610,"chatRoomâ€¦
8:27:16 PM [express] GET /api/chat-rooms/90/messages 200 in 2209ms :: {"messages":[{"id":649,"chatRoâ€¦
8:27:16 PM [express] GET /api/chat-rooms/89/messages 200 in 46ms :: {"messages":[{"id":568,"chatRoomâ€¦
8:27:16 PM [express] GET /api/profile-images/profile_1750617686061_8br3igrqnq.jpg 200 in 4ms
8:27:16 PM [express] GET /api/profile-images/profile_1750617357396_bmzacckp9z.jpg 200 in 7ms
8:27:17 PM [express] GET /api/vapid-public-key 304 in 0ms :: {"publicKey":"BKmAV18eVt2ymnpZdhph0G8Wcâ€¦
ğŸ“¤ VAPID ê³µê°œí‚¤ ìš”ì²­ë¨ (ì‹ ê·œ ì—”ë“œí¬ì¸íŠ¸)
ğŸ“¤ VAPID ê³µê°œí‚¤ ì‘ë‹µ: BKmAV18eVt2ymnpZdhph...
8:27:17 PM [express] GET /api/push-vapid-key 304 in 1ms :: {"publicKey":"BKmAV18eVt2ymnpZdhph0G8WclYâ€¦
8:27:17 PM [express] GET /api/chat-rooms/89/messages 200 in 2217ms :: {"messages":[{"id":568,"chatRoâ€¦
Push subscription error: error: null value in column "p256dh" of relation "push_subscriptions" violates not-null constraint
    at file:///home/runner/workspace/node_modules/@neondatabase/serverless/index.mjs:1345:74
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async DatabaseStorage.upsertPushSubscription (/home/runner/workspace/server/storage.ts:955:7)
    at async <anonymous> (/home/runner/workspace/server/routes.ts:1796:7) {
  length: 403,
  severity: 'ERROR',
  code: '23502',
  detail: 'Failing row contains (1560, 112, https://web.push.apple.com/QC6n8XjZowDnsgRQ3-T2GezqGjIUtod6QjB_C..., null, null, Mozilla/5.0 (iPhone; CPU iPhone OS 19_0 like Mac OS X) AppleWebK..., 2025-06-24 20:27:18.002593).',
  hint: undefined,
  position: undefined,
  internalPosition: undefined,
  internalQuery: undefined,
  where: undefined,
  schema: 'public',
  table: 'push_subscriptions',
  column: 'p256dh',
  dataType: undefined,
  constraint: undefined,
  file: 'execMain.c',
  line: '2006',
  routine: 'ExecConstraints'
}
8:27:18 PM [express] POST /api/push-subscription 500 in 218ms :: {"message":"í‘¸ì‹œ ì•Œë¦¼ êµ¬ë… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤."}
8:27:18 PM [express] POST /api/push-subscription 200 in 218ms :: {"success":true,"message":"í‘¸ì‹œ ì•Œë¦¼ êµ¬ë…â€¦
ğŸ“Š Push subscription status for user 112: { subscriptionCount: 1448, isSubscribed: true }
8:27:18 PM [express] GET /api/push-subscription/status 200 in 239ms :: {"isSubscribed":true,"subscriâ€¦
8:27:20 PM [express] GET /api/unread-counts 304 in 263ms :: {"unreadCounts":[{"chatRoomId":90,"unreaâ€¦
8:27:25 PM [express] GET /api/unread-counts 304 in 261ms :: {"unreadCounts":[{"chatRoomId":90,"unreaâ€¦